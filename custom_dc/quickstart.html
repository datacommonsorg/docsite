<!DOCTYPE html>

<html lang="en">
<head>
  <title>Quickstart - Docs - Data Commons</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" href="/assets/images/favicon.png" type="image/png"/>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@300;400;500;700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@600&family=Roboto&family=Material+Icons&display=swap" rel="stylesheet">
  <link href="/assets/css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/custom.css">
  
  
</head>
<body>
  <div id="main">
    <header id="main-header">
      <nav class="navbar navbar-light navbar-expand-lg col" id="main-nav">
        <div class="container-fluid">
          <div class="navbar-brand">
            <div id="main-header-logo">
                <a href="https://datacommons.org/">
                  <img src="/assets/images/dc-logo.svg" />
                </a>
            </div>
            <a href="https://datacommons.org">Data Commons</a>
            <!-- dot separater -->
            <span class="separator">&#8226;</span>
            <span><a href="/">Docs</a></span>
            </a>
          </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
          data-target="#dc-main-nav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-md-end" id="dc-main-nav">
            <div class="gcse-searchbox-only"
              data-resultsUrl="https://datacommons.org/search"></div>
            </div>
            </div>
      </nav>
    </header>

    <main id="" class="container-fluid">
      <div class="row">
        <div id="main-side-nav" class="col-3">
          <div id="sidebar"><details class="parent" open>
          <summary>
            <a href="/" class="">How to use Data Commons</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-3"><details class="child" >
                  <summary>
                    <a href="/what_is.html" class="">What is Data Commons?</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/data_model.html" class="">Key concepts and common tasks</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/glossary.html" class="">Glossary</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/place_types.html" class="">Place types</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/datasets/" class="">Data sources</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/api/" class="">API - Query data programmatically</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-63"><details class="child" >
                  <summary>
                    <a href="/api/rest/v2/" class="">REST (V2)</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-1"><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/observation.html" class="">
                              
                              Get statistical observations
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/node.html" class="">
                              
                              Get node properties
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/resolve.html" class="">
                              
                              Resolve entities
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/sparql.html" class="">
                              
                              Query with SPARQL
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/rest/v2/troubleshooting.html" class="">
                              
                              Troubleshooting
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/python/" class="">Python</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-2"><details class="child" >
                          <summary>
                            <a href="/api/python/place_in.html" class="">
                              
                              Get places within other places
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_value.html" class="">
                              
                              Get a single statistical value for a place
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_series.html" class="">
                              
                              Get time series for a place
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/stat_all.html" class="">
                              
                              Get statistical data for multiple places
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/property_label.html" class="">
                              
                              Get property labels of nodes
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/property_value.html" class="">
                              
                              Get property values of nodes
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/tutorials.html" class="">
                              
                              Tutorials
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/python/triple.html" class="">
                              
                              Get triples associated with nodes
                            </a>
                            
                          </summary>
                          </details></ul></details><details class="child" >
                  <summary>
                    <a href="/api/pandas/" class="">Pandas</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-3"><details class="child" >
                          <summary>
                            <a href="/api/pandas/time_series.html" class="">
                              
                              Get time series for a place
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/pandas/time_series_dataframe.html" class="">
                              
                              Get time series DataFrame
                            </a>
                            
                          </summary>
                          </details><details class="child" >
                          <summary>
                            <a href="/api/pandas/multivariate_dataframe.html" class="">
                              
                              Get multivariate DataFrame
                            </a>
                            
                          </summary>
                          </details></ul></details></ul></details><details class="parent" open>
          <summary>
            <a href="/api/sheets/" class="">Analyze data with Google Sheets</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-73"><details class="child" >
                  <summary>
                    <a href="/api/sheets/tutorials/" class="">Tutorials</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/sheets/get_name.html" class="">Get names associated with DCIDs</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/sheets/places_in.html" class="">Get places contained in another place</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/sheets/get_variable.html" class="">Get statistical variable values</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/sheets/get_property.html" class="">Get node property values</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/sheets/get_cohort_members.html" class="">Get members of a cohort</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/api/web_components/" class="">Embed data and visualizations in your own website</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-80"><details class="child" >
                  <summary>
                    <a href="/api/web_components/bar" class="">Bar chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/gauge" class="">Gauge chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/highlight" class="">Highlight tile</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/line" class="">Line chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/map" class="">Map chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/pie" class="">Pie chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/ranking" class="">Ranking chart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/scatter" class="">Scatter plot</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/api/web_components/slider" class="">Slider control</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/bigquery/" class="">Query with SQL/BigQuery</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-81"><details class="child" >
                  <summary>
                    <a href="/bigquery/query_places.html" class="">Query places</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_property_places.html" class="">Query observations and properties of places</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_more_complex.html" class="">More complex queries</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/bigquery/query_join_your_data.html" class="">Join with external data</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/contributing/" class="">Contribute to Data Commons</a>
            
          </summary>
          </details><details class="parent" open>
          <summary>
            <a href="/custom_dc/" class="">Build your own Data Commons</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-83"><details class="child" open>
                  <summary>
                    <a href="/custom_dc/quickstart.html" class=" active">Quickstart</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/custom_data.html" class="">Prepare and load your own data</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/custom_ui.html" class="">Customize the site</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/build_image.html" class="">Build and run a custom image</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/deploy_cloud.html" class="">Deploy to Google Cloud</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/launch_cloud.html" class="">Launch your Data Commons</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/advanced.html" class="">Advanced setups</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/troubleshooting.html" class="">Troubleshooting</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/custom_dc/faq.html" class="">Frequently asked questions</a>
                    
                  </summary>
                  </details></ul></details><details class="parent" open>
          <summary>
            <a href="/resources.html" class="">Additional resources</a>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
          </summary>
          <ul id="node-98"><details class="child" >
                  <summary>
                    <a href="/papers/" class="">Papers</a>
                    
                  </summary>
                  </details><details class="child" >
                  <summary>
                    <a href="/courseware/" class="">Educational materials</a>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                  </summary>
                  <ul id="child-2"><details class="child" >
                          <summary>
                            <a href="/courseware/data_literacy/" class="">
                              
                              Data literacy with Data Commons
                            </a>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="14" height="14">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path>
</svg>
                          </summary>
                          <ul id="grandchild-1"><li class="">
                                  <a href="/courseware/data_literacy/how_to_use.html" class="">
                                    How to use the course materials
                                  </a>
                                </li><li class="">
                                  <a href="/courseware/data_literacy/key_themes.html" class="">
                                    Key themes
                                  </a>
                                </li><li class="">
                                  <a href="/courseware/data_literacy/modules.html" class="">
                                    Modules
                                  </a>
                                </li></ul></details><details class="child" >
                          <summary>
                            <a href="/courseware/intro_data_science.html" class="">
                              
                              Introduction to data science
                            </a>
                            
                          </summary>
                          </details></ul></details></ul></details></div>
        </div>
        <div class="col-9">
          <div id="main-doc-content">
            
              
                <nav aria-label="Breadcrumb" id="main-breadcrumb">
                  <ol class="breadcrumb">
                    
                      <li class="breadcrumb-item">
                        <a href="/custom_dc/">
                          Build your own Data Commons
                        </a>
                      </li>
                    
                    <li class="breadcrumb-item active"><span>Quickstart </span></li>
                  </ol>
                </nav>
              
            
            <h1 class="no_toc" id="quickstart">Quickstart</h1>

<p>This page shows you how to run a local custom Data Commons instance inside Docker containers and load sample custom data from a local SQLite database. A custom Data Commons instance uses code from the public open-source repo, available at <a href="https://github.com/datacommonsorg/" target="_blank">https://github.com/datacommonsorg/</a>.</p>

<p>This is step 1 of the <a href="/custom_dc/index.html#workflow">recommended workflow</a>.</p>

<ul id="markdown-toc">
  <li><a href="#system-overview" id="markdown-toc-system-overview">System overview</a></li>
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#setup" id="markdown-toc-setup">One-time setup steps</a>    <ul>
      <li><a href="#get-a-data-commons-api-key" id="markdown-toc-get-a-data-commons-api-key">Get a Data Commons API key</a></li>
      <li><a href="#maps-key" id="markdown-toc-maps-key">Enable Google Cloud APIs and get a Maps API key</a></li>
      <li><a href="#clone-the-data-commons-repository" id="markdown-toc-clone-the-data-commons-repository">Clone the Data Commons repository</a></li>
      <li><a href="#env-vars" id="markdown-toc-env-vars">Set environment variables</a></li>
    </ul>
  </li>
  <li><a href="#about-the-downloaded-files" id="markdown-toc-about-the-downloaded-files">About the downloaded files</a></li>
  <li><a href="#look-at-the-sample-data" id="markdown-toc-look-at-the-sample-data">Look at the sample data</a></li>
  <li><a href="#load-sample-data" id="markdown-toc-load-sample-data">Load sample data</a></li>
  <li><a href="#start-services" id="markdown-toc-start-services">Start the services</a>    <ul>
      <li><a href="#stop-and-restart-the-services" id="markdown-toc-stop-and-restart-the-services">Stop and restart the services</a></li>
    </ul>
  </li>
  <li><a href="#view-the-local-website" id="markdown-toc-view-the-local-website">View the local website</a></li>
  <li><a href="#send-an-api-request" id="markdown-toc-send-an-api-request">Send an API request</a></li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a></li>
</ul>

<h2 id="system-overview">System overview</h2>

<p>The instructions in this page use the following setup:</p>

<p><img src="/assets/images/custom_dc/customdc_setup2.png" alt="local setup" /></p>

<p>The “data management” Docker container consists of scripts that do the following:</p>
<ul>
  <li>Convert custom CSV file data into SQL tables and store them in a data store – for now, in a local SQLite database</li>
  <li>Generate NL embeddings for custom data and store them – for now, in the local file system</li>
</ul>

<p>The “services” Docker container consists of the following Data Commons components:</p>
<ul>
  <li>A <a href="https://www.nginx.com/resources/glossary/reverse-proxy-server/" target="_blank">Nginx reverse proxy server</a>, which routes incoming requests to the web or API server</li>
  <li>A Python-Flask web server, which handles interactive requests from users</li>
  <li>An Python-Flask NL server, for serving natural language queries</li>
  <li>A Go Mixer, also known as the API server, which serves programmatic requests using Data Commons APIs. The SQL query engine is built into the Mixer, which sends queries to both the local and remote data stores to find the right data. If the Mixer determines that it cannot fully resolve a user query from the custom data, it will make an REST API call, as an anonymous “user” to the base Data Commons Mixer and data.</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Obtain a <a href="https://cloud.google.com/docs/get-started" target="_blank">GCP</a> billing account and project.</li>
  <li>If you are developing on Windows, install <a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank">WSL 2</a> (any distribution will do, but we recommend the default, Ubuntu), and enable <a href="https://docs.docker.com/desktop/wsl/" target="_blank">WSL 2 integration with Docker</a>.</li>
  <li>Install <a href="https://docs.docker.com/engine/install/" target="_blank">Docker Desktop/Engine</a>.</li>
  <li>Install <a href="https://git-scm.com/" target="_blank">Git</a>.</li>
  <li>Optional: Get a <a href="http://github.com" target="_blank">Github</a> account, if you would like to browse the Data Commons source repos using your browser.</li>
</ul>

<h2 id="setup">One-time setup steps</h2>

<h3 id="get-a-data-commons-api-key">Get a Data Commons API key</h3>

<p>An API key is required to authorize requests from your site to the base Data Commons site. API keys are managed by a self-serve portal. To obtain an API key, go to <a href="https://apikeys.datacommons.org" target="_blank">https://apikeys.datacommons.org</a> and request a key for the <code class="language-plaintext highlighter-rouge">api.datacommons.org</code> domain.</p>

<h3 id="maps-key">Enable Google Cloud APIs and get a Maps API key</h3>

<ol>
  <li>Go to <a href="https://console.cloud.google.com/apis/dashboard" target="_blank">https://console.cloud.google.com/apis/dashboard</a> for your project.</li>
  <li>Click <strong>Enable APIs &amp; Services</strong>.</li>
  <li>Under <strong>Maps</strong>, enable <strong><a href="https://console.cloud.google.com/apis/library/places-backend.googleapis.com" target="_blank">Places API</a></strong> and <strong><a href="https://console.cloud.google.com/apis/library/maps-backend.googleapis.com" target="_blank">Maps Javascript API</a></strong>.</li>
  <li>Go to <a href="https://console.cloud.google.com/google/maps-apis/credentials" target="_blank">https://console.cloud.google.com/google/maps-apis/credentials</a> for your project.</li>
  <li>Click <strong>Create Credentials</strong> &gt; <strong>API Key</strong>.</li>
  <li>Record the key and click <strong>Close</strong>.</li>
  <li>From the drop-down menu, enable <strong>Places API</strong> and <strong>Maps Javascript API</strong>. (Optionally enable other APIs for which you want to use this key.)</li>
  <li>Click <strong>OK</strong> and <strong>Save</strong>.</li>
</ol>

<h3 id="clone-the-data-commons-repository">Clone the Data Commons repository</h3>

<p><strong>Note:</strong> If you are using WSL on Windows, open the Linux distribution app as your command shell. You must use the Linux-style file structure for Data Commons to work correctly.</p>

<ol>
  <li>Open a terminal window, and go to a directory to which you would like to download the Data Commons repository.</li>
  <li>Clone the website Data Commons repository:
    <pre>git clone https://github.com/datacommonsorg/website.git [<var>DIRECTORY</var>]</pre>
    <p>If you don’t specify a directory name, this creates a local <code class="language-plaintext highlighter-rouge">website</code> subdirectory. If you specify a directory name, all files are created under that directory, without a <code class="language-plaintext highlighter-rouge">website</code> subdirectory.</p>
  </li>
</ol>

<p>When the downloads are complete, navigate to the root directory of the repo (e.g. <code class="language-plaintext highlighter-rouge">website</code>). References to various files and commands in these procedures are relative to this root.</p>

<pre>
cd website
</pre>

<h3 id="env-vars">Set environment variables</h3>

<ol>
  <li>Using your favorite editor, copy <code class="language-plaintext highlighter-rouge">custom_dc/env.list.sample</code> and save it as a new file <code class="language-plaintext highlighter-rouge">custom_dc/env.list</code>. It provides a template for getting started.</li>
  <li>Enter the relevant values for <code class="language-plaintext highlighter-rouge">DC_API_KEY</code> and <code class="language-plaintext highlighter-rouge">MAPS_API_KEY</code>.</li>
  <li>Set the <code class="language-plaintext highlighter-rouge">INPUT_DIR</code> to the full path to the <code class="language-plaintext highlighter-rouge">website/custom_dc/sample/</code> directory. For example if you have cloned the repo directly to your home directory, this might be <code>/home/<var>USERNAME</var>/website/custom_dc/sample/</code>. (If you’re not sure, type <code class="language-plaintext highlighter-rouge">pwd</code> to get the working directory.)</li>
  <li>For the <code class="language-plaintext highlighter-rouge">OUTPUT_DIR</code>, set it to the same path as the <code class="language-plaintext highlighter-rouge">INPUT_DIR</code>.</li>
</ol>

<p><strong>Warning:</strong> Do not use any quotes (single or double) or spaces when specifying the values.</p>

<h2 id="about-the-downloaded-files">About the downloaded files</h2>

<table>
  <thead>
    <tr>
      <th>Directory/file</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="300"><a href="https://github.com/datacommonsorg/website/tree/master/custom_dc/sample" target="_blank"><code>custom_dc/sample/</code></a></td>
      <td>Sample supplemental data that is added to the base data in Data Commons. This page describes the model and format of this data and how you can load and view it.  </td>
    </tr>
    <tr>
      <td><a href="https://github.com/datacommonsorg/website/tree/master/custom_dc/examples" target="_blank"><code>custom_dc/examples/</code></a></td>
      <td>More examples of custom data in CSV format and config.json. To configure your own custom data, see <a href="custom_data.html">Work with custom data</a>.</td>
    </tr>
    <tr>
      <td><a href="https://github.com/datacommonsorg/website/tree/master/server/templates/custom_dc/custom" target="_blank"><code>server/templates/custom_dc/custom/</code></a></td>
      <td>Contains customizable HTML files. To modify these, see <a href="custom_ui.html#html-templates">Customize HTML templates</a>.</td>
    </tr>
    <tr>
      <td><a href="https://github.com/datacommonsorg/website/tree/master/static/custom_dc/custom" target="_blank"><code>static/custom_dc/custom/</code></a></td>
      <td>Contains customizable CSS file and default logo. To modify the styles or replace the logo, see <a href="custom_ui.html#styles">Customize Javascript and styles</a>.</td>
    </tr>
  </tbody>
</table>

<h2 id="look-at-the-sample-data">Look at the sample data</h2>

<p>Before you start up a Data Commons site, it’s important to understand the basics of the data model that is expected in a custom Data Commons instance. Let’s look at the sample data in the CSV files in the <code class="language-plaintext highlighter-rouge">custom_dc/sample/</code> folder. This data is from the Organisation for Economic Co-operation and Development (OECD): “per country data for annual average wages” and “gender wage gaps”:</p>

<table>
  <thead>
    <tr>
      <th>countryAlpha3Code</th>
      <th>date</th>
      <th>average_annual_wage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BEL</td>
      <td>2000</td>
      <td>54577.62735</td>
    </tr>
    <tr>
      <td>BEL</td>
      <td>2001</td>
      <td>54743.96009</td>
    </tr>
    <tr>
      <td>BEL</td>
      <td>2002</td>
      <td>56157.24355</td>
    </tr>
    <tr>
      <td>BEL</td>
      <td>2003</td>
      <td>56491.99591</td>
    </tr>
    <tr>
      <td>…</td>
      <td>…</td>
      <td>…</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>countryAlpha3Code</th>
      <th>date</th>
      <th>gender_wage_gap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DNK</td>
      <td>2005</td>
      <td>10.16733044</td>
    </tr>
    <tr>
      <td>DNK</td>
      <td>2006</td>
      <td>10.17206126</td>
    </tr>
    <tr>
      <td>DNK</td>
      <td>2007</td>
      <td>9.850297951</td>
    </tr>
    <tr>
      <td>DNK</td>
      <td>2008</td>
      <td>10.18354903</td>
    </tr>
    <tr>
      <td>…</td>
      <td>…</td>
      <td>…</td>
    </tr>
  </tbody>
</table>

<p>There are a few important things to note:</p>
<ul>
  <li>There are only 3 columns: one representing a place (<code class="language-plaintext highlighter-rouge">countryAlpha3Code</code>, a <a href="/custom_dc/custom_data.html#special-names">special Data Commons place type</a>); one representing a date (<code class="language-plaintext highlighter-rouge">date</code>); and one representing a <a href="/glossary.html#variable"><em>statistical variable</em></a>, which is a Data Commons concept for a metric: <code class="language-plaintext highlighter-rouge">average_annual_wage</code> and <code class="language-plaintext highlighter-rouge">gender_wage_gap</code>. (Actually, there can be any number of statistical variable columns – but no other types of additional columns – and these two CSV files could be combined into one.)</li>
  <li>Every row is a separate <a href="/glossary.html#observation"><em>observation</em></a>, or a value of the variable for a given place and time. In the case of multiple statistical variable columns in the same file, each row would, of course, consist of multiple observations.</li>
</ul>

<p>This is the format to which your data must conform if you want to take advantage of Data Commons’ simple import facility. If your data doesn’t follow this model, you’ll need to do some more work to prepare or configure it for correct loading. (That topic is discussed in detail in <a href="/custom_dc/custom_data.html">Preparing and loading your data</a>.)</p>

<h2 id="load-sample-data">Load sample data</h2>

<p>To load the sample data:</p>

<ol>
  <li>If you are running on Windows or Mac, start Docker Desktop and ensure that the Docker Engine is running.</li>
  <li>
    <p>Open a terminal window, and from the root directory, run the following command to run the data management Docker container:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="se">\</span>
<span class="nt">--env-file</span> <span class="nv">$PWD</span>/custom_dc/env.list <span class="se">\</span>
<span class="nt">-v</span> <span class="nv">$PWD</span>/custom_dc/sample:<span class="nv">$PWD</span>/custom_dc/sample  <span class="se">\</span>
gcr.io/datcom-ci/datacommons-data:stable
</code></pre></div>    </div>
    <blockquote>
      <p>Tip: While the <code class="language-plaintext highlighter-rouge">env.list</code> file requires full paths for input and output directories, in Docker commands you can use system variables like <code class="language-plaintext highlighter-rouge">$PWD</code> as shortcuts. 
This does the following:</p>
    </blockquote>
  </li>
</ol>

<ul>
  <li>The first time you run it, downloads the latest stable Data Commons data image, <code class="language-plaintext highlighter-rouge">gcr.io/datcom-ci/datacommons-data:stable</code>, from the Google Cloud Artifact Registry, which may take a few minutes. Subsequent runs use the locally stored image.</li>
  <li>Maps the input sample data to a Docker path.</li>
  <li>Starts a Docker container.</li>
  <li>Imports the data from the CSV files, resolves entities, and writes the data to a SQLite database file, <code class="language-plaintext highlighter-rouge">custom_dc/sample/datacommons/datacommons.db</code>.</li>
  <li>Generates embeddings in <code class="language-plaintext highlighter-rouge">custom_dc/sample/datacommons/nl</code>. (To learn more about embeddings generation, see the <a href="/custom_dc/faq.html#natural-language-processing">FAQ</a>).</li>
</ul>

<p>Once the container has executed all the functions in the scripts, it shuts down.</p>

<h2 id="start-services">Start the services</h2>

<ol>
  <li>Open a new terminal window.</li>
  <li>From the root directory, run the following command to start the services Docker container:</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker run <span class="nt">-it</span> <span class="se">\</span>
  <span class="nt">-p</span> 8080:8080 <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">DEBUG</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  <span class="nt">--env-file</span> <span class="nv">$PWD</span>/custom_dc/env.list <span class="se">\</span>
  <span class="nt">-v</span> <span class="nv">$PWD</span>/custom_dc/sample:<span class="nv">$PWD</span>/custom_dc/sample  <span class="se">\</span>
  gcr.io/datcom-ci/datacommons-services:stable
</code></pre></div></div>

<blockquote>
  <p>Note: If you are running on Linux, depending on whether you have created a <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank">“sudoless” Docker group</a>, you may need to preface every <code class="language-plaintext highlighter-rouge">docker</code> invocation with <code class="language-plaintext highlighter-rouge">sudo</code>.</p>
</blockquote>

<p>This command does the following:</p>

<ul>
  <li>The first time you run it, downloads the latest stable Data Commons image, <code class="language-plaintext highlighter-rouge">gcr.io/datcom-ci/datacommons-services:stable</code>, from the Google Cloud Artifact Registry, which may take a few minutes. Subsequent runs use the locally stored image.</li>
  <li>Starts a services Docker container.</li>
  <li>Starts development/debug versions of the Web Server, NL Server, and Mixer, as well as the Nginx proxy, inside the container.</li>
  <li>Maps the output sample data to a Docker path.</li>
</ul>

<h3 id="stop-and-restart-the-services">Stop and restart the services</h3>

<p>If you need to restart the services for any reason, do the following:</p>

<ol>
  <li>In the terminal window where the container is running, press Ctrl-c to kill the Docker container.</li>
  <li>Rerun the <code class="language-plaintext highlighter-rouge">docker run</code> command as described in <a href="#start-services">Start the services</a>.</li>
</ol>

<p>Tip: If you close the terminal window in which you started the Docker services container, you can kill it as follows:</p>

<ol>
  <li>Open another terminal window, and from the root directory, get the Docker container ID.
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  docker ps
</code></pre></div>    </div>
    <p>The <code class="language-plaintext highlighter-rouge">CONTAINER ID</code> is the first column in the output.</p>
  </li>
  <li>Run:
    <pre>docker kill <var>CONTAINER_ID</var></pre>
  </li>
</ol>

<h2 id="view-the-local-website">View the local website</h2>

<p>Once the services are up and running, visit your local instance by pointing your browser to <a href="http://localhost:8080">http://localhost:8080</a>. You should see something like this:</p>

<p><img src="/assets/images/custom_dc/customdc_screenshot1.png" alt="screenshot_homepage" width="900" /></p>

<p>Now click the <strong>Timeline</strong> link to visit the Timeline explorer. Click <strong>Start</strong>, enter an OECD country (e.g. Canada) and click <strong>Continue</strong>. Now, in the <strong>Select variables</strong> tools, you’ll see the new variables:</p>

<p><img src="/assets/images/custom_dc/customdc_screenshot2.png" alt="screenshot_timeline" width="900" /></p>

<p>Select one (or both) and click <strong>Display</strong> to show the timeline graph:</p>

<p><img src="/assets/images/custom_dc/customdc_screenshot3.png" alt="screenshot_display" width="900" /></p>

<p>To issue natural language queries, click the <strong>Search</strong> link. Try NL queries against the sample data you just loaded, e.g. “Average annual wages in Canada”.</p>

<p><img src="/assets/images/custom_dc/customdc_screenshot3a.png" alt="screenshot_search" width="900" /></p>

<h2 id="send-an-api-request">Send an API request</h2>

<p>A custom instance can accept <a href="/api/rest/v2/index.html">REST API</a> requests at the endpoint <code class="language-plaintext highlighter-rouge">/core/api/v2/</code>, which can access both the custom and base data. To try it out, here’s an example request you can make to your local instance that returns the same data as the interactive queries above, using the <code class="language-plaintext highlighter-rouge">observation</code> API. Try entering this query in your browser address bar:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8080/core/api/v2/observation?entity.dcids=country%2FCAN&amp;select=entity&amp;select=variable&amp;select=value&amp;select=date&amp;variable.dcids=average_annual_wage
</code></pre></div></div>

<blockquote>
  <p>Note: You do not need to specify an API key as a <a href="/api/rest/v2/getting_started.html#query-param">query parameter</a>.</p>
</blockquote>

<p>If you select <strong>Prettyprint</strong>, you should see output like this:</p>

<p><img src="/assets/images/custom_dc/customdc_screenshot4.png" alt="screenshot_api_call" height="400" /></p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>Having trouble? Visit our <a href="/custom_dc/troubleshooting.html">Troubleshooting Guide</a> for detailed solutions to common problems.</p>

          </div>
          <div style="text-align:center" id="metadata">
            <p>
             Page last updated: February 24, 2025 &#8226; <a target="_blank" href="https://docs.google.com/forms/d/e/1FAIpQLSf23mC17idzIpzg6v4frCh8iWTl9dxeb4iSTVgo0WiBvnv5ZA/viewform?usp=pp_url&entry.871991796=/custom_dc/quickstart.html">
              Send feedback about this page
              </a>
            </p>
          </div>
      </div>
    </main>

    <footer id="main-footer">
      <div id="sub-footer">
        <span class="brand-byline">
          <span class="brand-text">An initiative from</span>
          <img class="brand-logo" src="/assets/images/google-logo.svg" />
        </span>
        <div class="sub-footer-links">
          <a href="https://policies.google.com/terms">Terms and Conditions</a>
          <a href="https://policies.google.com/privacy?hl=en-US">Privacy Policy</a>
        </div>
      </div>
    </footer>
  </div>
  <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script async
    src="https://cse.google.com/cse.js?cx=010079880385165835740%3Aosnv3q-sw08"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KWSES5WXZE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-KWSES5WXZE', {
      client_storage: 'none',
      anonymize_ip: true,
    });
  </script>
  <script>
    /**
     * Add placeholder text for Google Custom Search Engine search box in the page header
     */
    window.addEventListener("load", function() {
      const googleCustomSearchInput = document.querySelector(".gsc-search-box input[name=\"search\"]");
      if (googleCustomSearchInput) {
        googleCustomSearchInput.placeholder = "Search docs";
      }
    });
  </script>
  <script src="/assets/js/tabs.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
  <script>
    anchors.add();
  </script>
</body>
</html>
